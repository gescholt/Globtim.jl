{
  "permissions": {
    "allow": [
      "Bash(jq:*)",
      "Bash(\"Validate AdaptivePrecision Polynomial Expansion: HomotopyContinuation vs msolve Symbolic Comparison\" )",
      "Bash(\"type::testing,component::precision,priority::medium,msolve-integration,symbolic-validation\")",
      "Bash(./tools/gitlab/enhanced-gitlab-api.sh get-issue:*)",
      "Bash(julia:*)",
      "Bash(git add:*)",
      "Bash(git config:*)",
      "Bash(git branch:*)",
      "Bash(git fetch:*)",
      "Bash(ls:*)",
      "Bash(for dir in getting_started core_algorithm solvers)",
      "Bash(do)",
      "Bash(echo:*)",
      "Bash(if [ -f \"/Users/ghscholt/GlobalOptim/globtimcore/docs/build/$dir/index.html\" ])",
      "Bash(then)",
      "Bash(else)",
      "Bash(fi)",
      "Bash(done)",
      "Bash(git commit:*)",
      "Bash(git push:*)"
    ],
    "deny": [],
    "ask": [],
    "defaultMode": "acceptEdits",
    "additionalDirectories": [
      "experiments/lv4d_2025"
    ]
  },
  "enableAllProjectMcpServers": true,
  "hooks": {
    "PreToolUse": [
      {
        "matcher": "git",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\nif [[ \"$CLAUDE_TOOL_NAME\" != *\"git\"* ]] && [[ \"$CLAUDE_COMMAND\" != *\"git\"* ]]; then exit 0; fi\nif ! git rev-parse --git-dir > /dev/null 2>&1; then exit 0; fi\n\n# CRITICAL: Verify we're in the correct repository!\nREPO_DIR=$(basename \"$(git rev-parse --show-toplevel)\")\n\n# Only set remote if we're in the CORRECT repository\nif [ \"$REPO_DIR\" != \"globtimcore\" ]; then\n  # We're NOT in globtimcore - do NOT modify the remote!\n  exit 0\nfi\n\ncurrent_url=$(git remote get-url origin 2>/dev/null)\n# Only convert HTTPS URLs that are not already OAuth2 or SSH\nif [[ \"$current_url\" == git@git.mpi-cbg.de:globaloptim/globtimcore.git ]]; then\n  # Already correct SSH - nothing to do\n  exit 0\nelif [[ \"$current_url\" == ssh://git.mpi-cbg.de/globaloptim/globtimcore.git ]]; then\n  # SSH but wrong format - fix it\n  echo \"ðŸ”§ Fixing SSH URL format for globtimcore\"\n  git remote set-url origin \"git@git.mpi-cbg.de:globaloptim/globtimcore.git\"\n  echo \"âœ… Git remote configured correctly\"\nelif [[ \"$current_url\" == https://git.mpi-cbg.de* ]] && [[ \"$current_url\" != *\"oauth2:\"* ]]; then\n  # Plain HTTPS - try to convert to SSH\n  if ssh -T git@git.mpi-cbg.de 2>/dev/null | grep -q \"Welcome to GitLab\"; then\n    echo \"ðŸ”§ Switching to SSH authentication (preferred)\"\n    git remote set-url origin \"git@git.mpi-cbg.de:globaloptim/globtimcore.git\"\n    echo \"âœ… Git remote configured for SSH authentication\"\n  elif [ -f .env.gitlab.local ]; then\n    source .env.gitlab.local\n    echo \"ðŸ”§ SSH unavailable, using OAuth2 token authentication\"\n    git remote set-url origin \"https://oauth2:${GITLAB_PRIVATE_TOKEN}@git.mpi-cbg.de/globaloptim/globtimcore.git\"\n    echo \"âœ… Git remote configured for token authentication\"\n  fi\nfi",
            "timeout": 10
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "git",
        "hooks": [
          {
            "type": "command",
            "command": "#!/bin/bash\nif ! git rev-parse --git-dir > /dev/null 2>&1; then exit 0; fi\n\n# CRITICAL: Verify we're in the correct repository!\nREPO_DIR=$(basename \"$(git rev-parse --show-toplevel)\")\n\n# Only proceed if we're in the CORRECT repository\nif [ \"$REPO_DIR\" != \"globtimcore\" ]; then\n  # We're NOT in globtimcore - do NOT auto-commit!\n  exit 0\nfi\n\ngit_status=$(git status --porcelain)\nif [ -z \"$git_status\" ]; then exit 0; fi\nfile_count=$(echo \"$git_status\" | wc -l | tr -d ' ')\nif [ \"$file_count\" -ge 5 ] || [[ \"$CLAUDE_CONTEXT\" == *\"commit\"* ]] || [[ \"$CLAUDE_CONTEXT\" == *\"push\"* ]]; then\n  current_url=$(git remote get-url origin 2>/dev/null)\n  # Only convert HTTPS URLs - leave SSH URLs alone\n  if [[ \"$current_url\" == git@git.mpi-cbg.de:globaloptim/globtimcore.git ]]; then\n    # Already correct SSH - nothing to do\n    :\n  elif [[ \"$current_url\" == ssh://git.mpi-cbg.de/globaloptim/globtimcore.git ]]; then\n    # Fix SSH format\n    git remote set-url origin \"git@git.mpi-cbg.de:globaloptim/globtimcore.git\"\n  elif [[ \"$current_url\" == https://git.mpi-cbg.de* ]] && [[ \"$current_url\" != *\"oauth2:\"* ]]; then\n    # Plain HTTPS - try to convert to SSH\n    if ssh -T git@git.mpi-cbg.de 2>/dev/null | grep -q \"Welcome to GitLab\"; then\n      git remote set-url origin \"git@git.mpi-cbg.de:globaloptim/globtimcore.git\"\n    elif [ -f .env.gitlab.local ]; then\n      source .env.gitlab.local\n      git remote set-url origin \"https://oauth2:${GITLAB_PRIVATE_TOKEN}@git.mpi-cbg.de/globaloptim/globtimcore.git\"\n    fi\n  fi\n  git add .\n  commit_msg=\"feat: Auto-commit of development progress\n\nðŸ”„ Changes Summary:\n- $file_count files modified/added\n- Context: $CLAUDE_CONTEXT\n\nðŸ¤– Generated with [Claude Code](https://claude.ai/code)\n\nCo-Authored-By: Claude <noreply@anthropic.com>\"\n  git commit -m \"$commit_msg\"\n  git push\n  echo \"âœ… Auto-committed and pushed $file_count files\"\nfi",
            "timeout": 60
          }
        ]
      }
    ]
  }
}
